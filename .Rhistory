treatment <- select(treatment, -c("Control", "Treatment"))
treatment%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_treatment))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
treatment%>%
filter(Site == "UM")%>%
ggplot(aes(Species, effect_of_treatment))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Upper Montane", y = "number of days shorter (-) or longer (+)")
treatment%>%
filter(Site == "LSA")%>%
ggplot(aes(Species, effect_of_treatment))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Subalpine", y = "number of days shorter (-) or longer (+)")
treatment%>%
filter(Site == "USA")%>%
ggplot(aes(Species, effect_of_treatment))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Upper Subalpine", y = "number of days shorter (-) or longer (+)")
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
####Calculate durations and deltas as the latest date minus the earliest date####
##create durations dataset
pheno <- pheno %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(pheno)
####Calculate Events####
pheno$NL <- pheno$FLE-pheno$NL
View(pheno)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
####Calculate Events####
pheno$NL <- pheno$FLE-pheno$NL
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
####Calculate Events####
pheno$duration_NL <- pheno$FLE-pheno$NL
View(pheno)
pheno$duration_FLE <- pheno$FOF-pheno$FLE
View(pheno)
pheno$duration_FOF <- pheno$FLCC-pheno$FOF
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
pheno <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
View(pheno)
pheno <- pheno %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(pheno)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
pheno <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
View(pheno)
pheno <- na.omit(pheno)
pheno <- pheno %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(pheno)
#calculate durations
pheno$duration <- pheno$max - pheno$min
View(pheno)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
pheno <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
pheno <- na.omit(pheno)
pheno <- pheno %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(pheno)
#calculate durations
pheno$duration <- pheno$max - pheno$min
View(pheno)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
duration <- na.omit(duration)
duration <- duration %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
#calculate durations
duration$duration <- duration$max - duration$min
##reorder dataframe to create deltas dataset
deltas <- durations %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = species_duration)
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = species_duration)
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
View(duration)
View(deltas)
#calculate deltas
deltas$delta_duration <- deltas$`2018`- deltas$`2017`
pheno_deltas <- pheno_deltas%>%
select(-c(`2017`, `2018`))
deltas <- deltas%>%
select(-c(`2017`, `2018`))
View(deltas)
deltas <- na.omit(deltas)
View(deltas)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
View(pheno)
View(duration)
View(duration)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
View(pheno)
View(duration)
duration <- duration %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(duration)
duration <- filter(duration, n > 1)
View(duration)
#calculate durations
duration$duration <- duration$max - duration$min
View(duration)
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
View(deltas)
deltas <- na.omit(deltas)
View(deltas)
#calculate deltas
deltas$delta_duration <- deltas$`2018`- deltas$`2017`
View(deltas)
deltas <- deltas%>%
select(-c(`2017`, `2018`))
View(deltas)
View(pheno)
View(duration)
View(deltas)
View(pheno)
View(duration)
View(duration)
View(duration)
####Effect of year for durations####
duration <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
View(duration)
duration <- na.omit(duration)
View(duration)
duration$effect_of_year <- duration$`2018`- duration$`2017`
View(duration)
#remove years colums for pivot wider
duration <- select(duration, -c("2017", "2018"))
View(duration)
View(duration)
year$Event<- factor(year$Event, levels = c("NL", "FLE", "FOF", "FLCC"))
duration%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
duration$Event<- factor(duration$Event, levels = c("NL", "FLE", "FOF", "FLCC"))
duration%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
View(duration)
duration <- filter(duration, Treatment == "Control")
View(duration)
duration$Event<- factor(duration$Event, levels = c("NL", "FLE", "FOF", "FLCC"))
duration%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
View(duration)
duration%>%
filter(Site == "UM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Upper Montane", y = "number of days shorter (-) or longer (+)")
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
duration <- duration %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
duration <- filter(duration, n > 1)
#calculate durations
duration$duration <- duration$max - duration$min
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
deltas <- na.omit(deltas)
#calculate deltas
deltas$delta_duration <- deltas$`2018`- deltas$`2017`
deltas <- deltas%>%
select(-c(`2017`, `2018`))
####Effect of year for durations####
duration <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
duration <- na.omit(duration)
duration$effect_of_year <- duration$`2018`- duration$`2017`
#remove years colums for pivot wider
duration <- select(duration, -c("2017", "2018"))
View(duration)
#### effect of the treatment for durations####
duration_treatment <- duration%>%
pivot_wider(names_from = Treatment, values_from = effect_of_year)
View(duration_treatment)
duration_treatment <- na.omit(duration_treatment)
View(duration_treatment)
#calculate difference in timing between treatments
treatment$effect_of_treatment <- treatment$Treatment - treatment$Control
#calculate difference in timing between treatments
duration_treatment$effect_of_year <- duration_treatment$Treatment - duration_treatment$Control
treatment <- select(treatment, -c("Control", "Treatment"))
View(duration_treatment)
duration_treatment <- select(duration_treatment, -c("Control", "Treatment"))
View(duration_treatment)
duration_treatment%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
duration <- filter(duration, n > 1)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Creating files for duration of pheno events and change in duration of pheno events
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0) #playing around with difference between & and | to filter. if '&' it cuts the data down to only observations that have values for ALL phenophases that year.
####Calculate durations and deltas as the latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
# pivot longer lets you designate columns by name so that if the order changes it's ok
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
duration <- duration %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
#calculate durations
duration$duration <- duration$max - duration$min
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
deltas <- na.omit(deltas)
#calculate deltas
deltas$delta_duration <- deltas$`2018`- deltas$`2017`
deltas <- deltas%>%
select(-c(`2017`, `2018`))
####Effect of year for durations####
duration <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
duration <- na.omit(duration)
duration$effect_of_year <- duration$`2018`- duration$`2017`
#remove years colums for pivot wider
duration <- select(duration, -c("2017", "2018"))
duration <- filter(duration, Treatment == "Control")
duration$Event<- factor(duration$Event, levels = c("NL", "FLE", "FOF", "FLCC"))
duration%>%
filter(Site == "LM")%>%
ggplot(aes(Species, effect_of_year))+
geom_bar(stat = "identity", position = "dodge")+
coord_flip()+
facet_grid(~Event)+
labs(title = "Lower Montane", y = "number of days shorter (-) or longer (+)")
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Calculating deltas
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0)
rm(list = ls())
## Date: 2020-04-10
## User: Chelsea Wilmer
## SFA/CSU Thesis
## Script: Calculating durations
## Packages:
library(tidyverse)
####Bring in phenology data####
source("/Users/chelseawilmer/Desktop/Github/Phenology/Phenology.data.cleanup.R")
#remove columns that we don't need
pheno <- select(pheno, -c(Duplicate.Plot, FBB, FLB))
#filter observations to those that have a vlaue for NL, FLE, FOF, and FLCC
pheno <- filter(pheno, NL >0 & FLE >0 & FOF>0 & FLCC >0)
####Calculate durations: latest date minus the earliest date####
#reorder dataset so that NL, FLE, FOF, and FLCC are in column 'Event' and the values are in column 'DOY'
duration <- pheno %>%
pivot_longer(cols = c("NL", "FLE", "FOF","FLCC"),
names_to = "Event", values_to = "DOY")
View(duration)
duration <- duration %>%
group_by(Year, Site, Treatment, Species, Event) %>%
summarise(max = max(DOY, na.rm = T),
min = min(DOY, na.rm = T),
mean = mean(DOY, na.rm = T),
n = n())
View(duration)
#calculate durations
duration$duration <- duration$max - duration$min
View(duration)
##reorder dataframe to create deltas dataset
deltas <- duration %>%
select(-c(max, min, n, mean))%>%
pivot_wider(names_from = Year, values_from = duration)
